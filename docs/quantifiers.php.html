<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>The Boa Programming Guide - Quantifiers - Boa - Iowa State University</title>
<link href="../css/base.css" media="all" rel="stylesheet">
<link href="../css/style.css" media="all" rel="stylesheet">
<!--[if lt IE 9]>
		<style>
			ul.left > li, ul.right > li{ *display: inline; }
			#ribbon form > input[type="submit"]{ *vertical-align: baseline; }
		</style>
	<![endif]-->
<!-- SYNTAX HIGHLIGHTING -->
<script type="text/javascript" src="https://boalang.org/boa/sites/all/libraries/ace/src/ace.js"></script>
<script type="text/javascript" src="https://boalang.org/boa/sites/all/libraries/ace/src/theme-crimson_editor.js"></script>
<script type="text/javascript" src="https://boalang.org/boa/sites/all/libraries/ace/src/mode-boa.js"></script>
<script type="text/javascript" src="https://boalang.org/boa/sites/all/libraries/ace/src/mode-java.js"></script>
<link href="https://boalang.org/boa/sites/all/themes/boa/css/boa-style.css" media="screen" rel="stylesheet" type="text/css"/>
<!-- END SYTNAX HIGHLIGHTING -->
</head>
<body>
<div class="skip"><a accesskey="2" href="quantifiers.php.html#container">Skip
Navigation</a></div>
<div class="hwrapper" id="header">
<div id="top-strip">
<div class="grids-24">
<div class="grid-8">
&nbsp;
</div>
<div class="grid-16">
&nbsp;
</div>
</div>
</div>
<div id="ribbon">
<div class="grids-24">
<div class="grid-16">
<h1 class="nameplate"><a accesskey="1" href="../index.html"><img src="../img/boa-white.png"></a></h1>
</div>
<div class="grid-8">
<form action="http://www.google.com/search" method="GET">
	<input name="as_sitesearch" type="hidden" value="boa.cs.iastate.edu" />
	<input accesskey="s" name="as_q" placeholder="Search" tabindex="1" type="text" />
	<input name="btnG" title="Search" type="submit" value="" />
</form>
</div>
</div>
<div class="grids-24">
<div class="grid-12">
<h2 class="site-title">Mining Ultra-Large-Scale Software Repositories</h2>
</div>
<div class="grid-12">
<h2 style="text-align: right;" class="site-title"><a href="mailto:boasupport@iastate.edu">Contact Us</a></h2>
</div>
</div>
</div>
</div>
<div id="container">
<div class="grids-24">
<div class="grid-5 sidebar" id="left-sidebar">
<ul class="navigation"><li><a href="../examples/index.php.html">Examples</a></li>
<li class="selected"><a href="index.php.html">Programming Guide</a><ul><li><a href="dsl-types.php.html">Domain-Specific Types</a></li>
<li><a href="types.php.html">Other Built-In Types</a></li>
<li><a href="dsl-functions.php.html">Domain-Specific Functions</a></li>
<li><a href="functions.php.html">Other Built-In Functions</a></li>
<li><a href="user-functions.php.html">User-Defined Functions</a></li>
<li><a href="aggregators.php.html">Output Aggregators</a></li>
<li><a href="vars.php.html">Built-In Variables</a></li>
<li><a href="consts.php.html">Constants</a></li>
<li class="selected"><a href="quantifiers.php.html">Using Quantifiers</a><ul><li><a href="quantifiers.php.html#foreach">foreach</a></li>
<li><a href="quantifiers.php.html#exists">exists</a></li>
<li><a href="quantifiers.php.html#ifall">ifall</a></li>
</ul></li>
<li><a href="visitors.php.html">Using Visitors</a></li>
<li><a href="program-analysis.php.html">Program Analysis</a></li>
</ul></li>
<li><a href="../stats/index.php.html">Dataset Statistics</a></li>
<li><a href="../papers/index.php.html">Publications</a></li>
<li><a href="https://groups.google.com/g/boa-user">User Forum</a></li>
<li><a href="../ide/index.php.html">IDE Support</a></li>
<li><a href="../api/index.php.html">Client API</a></li>
<li><a href="https://boalang.org/boa/index.php">User Login (MSR)</a></li>
<li><a href="https://boalang.org/boac/index.php">User Login (COVID-19)</a></li>
<li><a href="https://boalang.org/boag/index.php">User Login (Genomics)</a></li>
<li><a href="../index.php.html">About</a></li>
<li><a href="../policies/index.php.html">Privacy &amp; Terms</a></li>
</ul>
<div id="news-widget" class="sidebar-item"><h4 class="title">News</h4>
<b>Aug '22</b>: New <a href="../ide/vscode/index.html">VSCode extension</a> available<br />
<b>Jun '22</b>: New <a href="https://www.npmjs.com/package/@boalang/boa-api">Boa API for JavaScript</a> available<br />
<b>Mar '20</b>: New Boa site for CORD-19 available<br />
<b>Sep '19</b>: New <a href="https://pypi.org/project/boa-api/">Boa API for Python</a> available<br />
</div>
</div>
<div class="grid-19" id="content">
<div class="header gutter"><h1>The Boa Programming Guide - Quantifiers</h1>
<p>
Quantifiers in Boa provide an easy way to specify loops with conditions.  While
these are just sugars in the language, they are much more concise and thus
easier to write and maintain.
</p>
<p>
The general form of quantifiers is given below:
</p>
<div class="sourcecode" id="code_1" style="position: relative; width: 60em;">quantifier (var: type; condition)
	statement</div>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var BoaMode = require("ace/mode/boa").Mode;
var Range = require("ace/range").Range;
var editor = ace.edit("code_1");
editor.getSession().setMode(new BoaMode());
editor.setTheme("ace/theme/crimson_editor");
editor.renderer.setShowGutter(true);
editor.setShowPrintMargin(false);
editor.setShowInvisibles(false);
editor.setHighlightActiveLine(false);
editor.setReadOnly(true);
editor.setOptions({
	maxLines: 500
});
//--><!]]>
</script><p>
The code above defines a loop.  Inside the loop, the quantifier variable
<code>var</code> is declared.  There are three kinds of
<code>quantifier</code>: <code>foreach</code>, <code>exists</code>, or
<code>ifall</code>.  The quantifier variable also defines a type (usually
<code>int</code>).  This variable is used inside the <code>condition</code> and
determines if and how often the given <code>statement</code> executes.
</p>
<p>
The condition must be a <code>bool</code> statement.  If it is not boolean, the
condition is rewritten by the compiler to <code>def(condition)</code>.  This
allows, for example, easily iterating over arrays.
</p>
<p>
Let's look at each kind of quantifier via some simple examples.
</p>

<h2 id="foreach">foreach Quantifiers</h2>
<p>
The <code>foreach</code> quantifier will evaluate the given <code>condition</code>
for each possible value. If the <code>condition</code> evaluates to
<code>true</code>, then the specified <code>statement</code> executes with
the quantifier bound to the value that caused the <code>condition</code> to
evaluate to <code>true</code>.
</p>
<p>
For example, what if we wanted to increment a counter each time a
<code>Project</code>'s declared <code>programming_languages</code> contains the
string <code>java</code>?  We might write the following statement:
</p>
<div class="sourcecode" id="code_2" style="position: relative; width: 60em;">foreach (i: int; match(`java`, p.programming_languages[i]))
	counts[p.programming_languages[i]] &lt;&lt; 1;</div>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var BoaMode = require("ace/mode/boa").Mode;
var Range = require("ace/range").Range;
var editor = ace.edit("code_2");
editor.getSession().setMode(new BoaMode());
editor.setTheme("ace/theme/crimson_editor");
editor.renderer.setShowGutter(true);
editor.setShowPrintMargin(false);
editor.setShowInvisibles(false);
editor.setHighlightActiveLine(false);
editor.setReadOnly(true);
editor.setOptions({
	maxLines: 500
});
//--><!]]>
</script><p>
This statement declares the quantifier variable <code>i</code> to be of type
<code>int</code>.  The loop generated from this code will loop over all
values in the array <code>p.programming_languages</code>, binding
<code>i</code> for each value and evaluating the condition.  If the condition
evaluates to true, then the value <code>1</code> is sent to the output table
<code>counts[p.programming_languages[i]]</code>.  Note that the value of
<code>i</code> is bound inside the body of the statement.
</p>
<p>
For reference, a de-sugared form semantically equivilent to the above could be:
</p>
<div class="sourcecode" id="code_3" style="position: relative; width: 60em;">{
	length := len(p.programming_languages);
	for (i := 0; i &lt; length; i++)
		if (match(`java`, p.programming_languages[i])) {
			counts[p.programming_languages[i]] &lt;&lt; 1;
		}
}</div>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var BoaMode = require("ace/mode/boa").Mode;
var Range = require("ace/range").Range;
var editor = ace.edit("code_3");
editor.getSession().setMode(new BoaMode());
editor.setTheme("ace/theme/crimson_editor");
editor.renderer.setShowGutter(true);
editor.setShowPrintMargin(false);
editor.setShowInvisibles(false);
editor.setHighlightActiveLine(false);
editor.setReadOnly(true);
editor.setOptions({
	maxLines: 500
});
//--><!]]>
</script><p>
As you can see, the compiler automatically infers the bounds of the loop based
on the given condition.  If for example the condition was more complex and the
quantifier variable used to index more than one expression, the generated
<code>length</code> variable would use the minimum value from each expression.
</p>

<h2 id="exists">exists Quantifiers</h2>
<p>
The <code>exists</code> quantifier will evaluate the given
<code>condition</code> for each possible value. If there exists a
<code>condition</code> that evaluates to <code>true</code> for at least one
value, then the specified <code>statement</code> executes with the quantifier
bound to a deterministically chosen value that caused the
<code>condition</code> to evaluate to <code>true</code>.
</p>
<p>
For example, what if instead of incrementing the counter for each of a
<code>Project</code>'s declared <code>programming_languages</code> that
contains the string <code>java</code>, we only want to increment it once if at
least one contains that string?  We might write the following statement:
</p>
<div class="sourcecode" id="code_4" style="position: relative; width: 60em;">exists (i: int; match(`java`, p.programming_languages[i]))
	counts[p.programming_languages[i]] &lt;&lt; 1;</div>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var BoaMode = require("ace/mode/boa").Mode;
var Range = require("ace/range").Range;
var editor = ace.edit("code_4");
editor.getSession().setMode(new BoaMode());
editor.setTheme("ace/theme/crimson_editor");
editor.renderer.setShowGutter(true);
editor.setShowPrintMargin(false);
editor.setShowInvisibles(false);
editor.setHighlightActiveLine(false);
editor.setReadOnly(true);
editor.setOptions({
	maxLines: 500
});
//--><!]]>
</script><p>
This statement declares the quantifier variable <code>i</code> to be of type
<code>int</code>.  The loop generated from this code will loop over all
values in the array <code>p.programming_languages</code>, binding
<code>i</code> for each value and evaluating the condition.  If the condition
evaluates to true for at least one value of <code>i</code>, then the value
<code>1</code> is sent to the output table
<code>counts[p.programming_languages[i]]</code>.  This value is sent exactly
<code>0</code> or <code>1</code> time.  Note that the value of <code>i</code>
is bound inside the body of the statement to a deterministically chosen
value that caused the condition to evaluate to <code>true</code>.
</p>
<p>
For reference, a de-sugared form semantically equivilent to the above could be:
</p>
<div class="sourcecode" id="code_5" style="position: relative; width: 60em;">{
	length := len(p.programming_languages);
	i := 0;
	for (; i &lt; length; i++)
		if (match(`java`, p.programming_languages[i]))
			break;
	if (i &lt; length) {
		counts[p.programming_languages[i]] &lt;&lt; 1;
	}
}</div>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var BoaMode = require("ace/mode/boa").Mode;
var Range = require("ace/range").Range;
var editor = ace.edit("code_5");
editor.getSession().setMode(new BoaMode());
editor.setTheme("ace/theme/crimson_editor");
editor.renderer.setShowGutter(true);
editor.setShowPrintMargin(false);
editor.setShowInvisibles(false);
editor.setHighlightActiveLine(false);
editor.setReadOnly(true);
editor.setOptions({
	maxLines: 500
});
//--><!]]>
</script><p>
Again, as you can see, the compiler automatically infers the bounds of the loop
based on the given condition.
</p>

<h2 id="ifall">ifall Quantifiers</h2>
<p>
The third kind of quantifier is the <code>ifall</code> quantifier. This
quantifier evaluates the given <code>condition</code> for each possible value.
If the <code>condition</code> evaluates to <code>true</code> for all values,
then the specified <code>statement</code> executes exactly once.  The
quantifier variable is not available in the body of the <code>statement</code>.
</p>
<p>
For example, perhaps we want to count all <code>Revision</code>s that only
committed Java files.  For this, we might write the following code:
</p>
<div class="sourcecode" id="code_6" style="position: relative; width: 60em;">ifall (i: int; hasfiletype(rev.files[i], "java"))
	counts &lt;&lt; 1;</div>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var BoaMode = require("ace/mode/boa").Mode;
var Range = require("ace/range").Range;
var editor = ace.edit("code_6");
editor.getSession().setMode(new BoaMode());
editor.setTheme("ace/theme/crimson_editor");
editor.renderer.setShowGutter(true);
editor.setShowPrintMargin(false);
editor.setShowInvisibles(false);
editor.setHighlightActiveLine(false);
editor.setReadOnly(true);
editor.setOptions({
	maxLines: 500
});
//--><!]]>
</script><p>
This statement declares the quantifier variable <code>i</code> to be of type
<code>int</code>.  The loop generated from this code will loop over all values
in the array <code>rev.files</code>, binding <code>i</code> for each value
and evaluating the condition.  If the condition evaluates to true for all
values of <code>i</code>, then the value <code>1</code> is sent to the output
table <code>counts</code>.  This value is sent exactly <code>0</code> or
<code>1</code> time.
</p>
<p>
For reference, a de-sugared form semantically equivilent to the above could be:
</p>
<div class="sourcecode" id="code_7" style="position: relative; width: 60em;">{
	length := len(rev.files);
	stop := false;
	for (i := 0; i &lt; length; i++)
		if (!hasfiletype(rev.files[i], "java")) {
			stop = true;
			break;
		}
	if (!stop) {
		counts &lt;&lt; 1;
	}
}</div>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var BoaMode = require("ace/mode/boa").Mode;
var Range = require("ace/range").Range;
var editor = ace.edit("code_7");
editor.getSession().setMode(new BoaMode());
editor.setTheme("ace/theme/crimson_editor");
editor.renderer.setShowGutter(true);
editor.setShowPrintMargin(false);
editor.setShowInvisibles(false);
editor.setHighlightActiveLine(false);
editor.setReadOnly(true);
editor.setOptions({
	maxLines: 500
});
//--><!]]>
</script><p>
Again note the compiler inferred the loop bounds automatically.  The quantifier
variable is not available in the body, as the value of <code>i</code> in this
case would be outside the bounds of the array.
</p>
</div>
</div>
</div>
</div>
<div class="fwrapper grids-24">
<div class="grids-24" id="footer">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1547227-7']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<div class="grid-3 first"><a class="nameplate" href="http://www.iastate.edu/"><img alt="Iowa State University" src="../img/sprite.png"></a></div>
<div class="grid-21 last">
<span><a href="http://design.cs.iastate.edu/">Laboratory of Software Design</a>, <a href="http://www.cs.iastate.edu/">Department of Computer Science</a>, </span><script type="text/javascript"><!--
	document.write('<a href="mailto:' + (['hridesh', 'iastate.edu'].join('@'))
			+ '">' + (['hridesh', 'iastate.edu'].join('@')) + '<\/a>');
// --></script>
<ins><noscript><div><code>hridesh (at) iastate (dot) edu</code></div></noscript></ins>
<p>Copyright &#169; 2012&ndash;2015, Iowa State University of Science and Technology. All rights reserved.</p>
<p>
&nbsp;
</p>
<p>
This material is based upon work supported by the US National Science
Foundation (NSF) under grants CCF-19-34884, CNS-15-13263, CNS-15-12947,
CCF-14-23370, CCF-13-49153, CCF-11-17937, CCF-10-17334, and CCF-10-18600.
</p>
<p>
Any opinions, findings, and conclusions or recommendations expressed in this
material are those of the author(s) and do not necessarily reflect the views of
the National Science Foundation.
</p>
</div>
</div>
</div>
</body>
</html>